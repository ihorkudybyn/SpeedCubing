{% extends 'base.html' %}

{% block stylesheet %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
{% endblock %}

{% block title %}
  <title>Register</title>
{% endblock %}

{% block body %}
  <div class="d-flex align-items-center justify-content-center vh-50">
    <div class="col-12 col-md-4">
      <form action="{{ url_for('register') }}" method="post" class="py-5" id="registerForm">
        <h1 class="h3 mb-3 fw-normal text-center">Create an account</h1>

        {% if error %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                {{ error }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endif %}

        <div class="form-floating mb-3">
          <input
            type="email"
            class="form-control"
            name="email"
            id="email"
            placeholder="name@example.com"
            required>
          <label for="email">Email address</label>
        </div>

        <div class="form-floating mb-3">
          <input
            type="password"
            class="form-control"
            name="password"
            id="password"
            placeholder="Password"
            required>
          <label for="password">Password</label>
          <div class="password-requirements mt-2 small text-muted">
            <p class="mb-1">Password must contain:</p>
            <ul>
              <li id="length" class="text-danger">At least 8 characters</li>
              <li id="uppercase" class="text-danger">At least 1 uppercase letter</li>
              <li id="number" class="text-danger">At least 1 number</li>
              <li id="special" class="text-danger">At least 1 special character</li>
            </ul>
          </div>
        </div>

        <div class="form-floating mb-3">
          <input
            type="password"
            class="form-control"
            name="confirm_password"
            id="confirm_password"
            placeholder="Confirm Password"
            required>
          <label for="confirm_password">Confirm Password</label>
          <div id="password-match-feedback" class="invalid-feedback">
            Passwords do not match
          </div>
        </div>

        <button class="btn btn-primary w-100 py-2" type="submit" id="submitBtn" disabled>Register</button>

        <p class="mt-3 text-center">
          Already have an account?
          <a href="{{ url_for('login') }}">Sign in</a>
        </p>
      </form>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
{% endblock %}